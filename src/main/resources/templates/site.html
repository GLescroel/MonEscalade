<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet">
    <title>Site</title>
</head>
<body>
<header class="page-header">
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Accueil <span class="sr-only">(current)</span></a>
                </li>
                <div sec:authorize="!isAuthenticated()">
                    <li class="nav-item active">
                        <a class="nav-link" href="/login">S'authentifier<span class="sr-only">(current)</span></a>
                    </li>
                </div>
                <div sec:authorize="isAuthenticated()">
                    <li class="nav-item active">
                        <a class="nav-link" href="/logout">Log out <span class="sr-only">(current)</span></a>
                    </li>
                </div>
            </ul>
        </nav>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-6"><h1><span th:if="${site}" th:text="${site.getNom()}"/></h1></div>
            <div class="col-4 offset-2 align-self-center" th:if="${site}">
                <form class="button" id="modifSite" th:action="@{/modifSite/{idSite}(idSite=${site.getId()})}">
                    <div sec:authorize="hasAnyAuthority('Membre', 'Administrateur')">
                    <input type="submit" value="Modifier ce site"/>
                    </div>
                </form>
            </div>
        </div>
    </div>
</header>

<div class="container">
<img alt="Mountain View" class="col-12" style="width:600px" th:src="@{Site_+${site.getId()}+.jpg}">

<div>
    <span><h3>Localisation : </h3></span>
    <dl class="list-inline">
        <dt>Continent</dt>
        <dd th:text="${site.getLocalisation().getContinent().getNom()}">Continent</dd>
        <dt>Pays</dt>
        <dd th:text="${site.getLocalisation().getPays().getNom()}">Pays</dd>
        <dt>Région</dt>
        <dd th:text="${site.getLocalisation().getRegion()}">Région</dd>
        <dt>Département</dt>
        <dd th:text="${site.getLocalisation().getDepartement()}">Département</dd>
        <dt>Ville</dt>
        <dd th:text="${site.getLocalisation().getVille()}">Ville</dd>
        <dt>Adresse</dt>
        <dd th:text="${site.getLocalisation().getAdresse()}">Adresse</dd>
    </dl>
</div>
</div>

<br><br>

<div th:if="!${secteurs.isEmpty()}">

    <div class="container p-0">
        <div class="card">
            <div class="card-header"><h5>Informations détaillées des secteurs</h5></div>
            <div class="card-body p-0">
                <div id="accordionSecteur">
                    <div class="card" th:each="secteur : ${secteurs}">
                        <div class="card-header">
                            <a class="card-link" data-toggle="collapse"
                               th:attr="href='#collapseSecteurId_'+${secteur.getId()}">
                                <span th:utext="${secteur.getNom()}">...</span>
                            </a>
                        </div>
                        <div class="collapse" data-parent="#accordionSecteur"
                             th:attr="id='collapseSecteurId_'+${secteur.getId()}">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-borderless text-center">
                                        <thead>
                                        <th class="text-left">nom de la voie</th>
                                        <th>cotation</th>
                                        <th>Equipee</th>
                                        </thead>
                                        <tbody>
                                        <tr th:each="voie : ${secteur.getVoies()}">
                                            <td class="text-left" th:utext="${voie.getNom()}"></td>
                                            <td th:utext="${voie.getCotation()}"></td>
                                            <td th:utext="${voie.isEquipee()}"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br><br>
<div th:if="!${commentaires.isEmpty()}">
    <div class="container">
        <dl>
            <dt><h3>Commentaires</h3></dt>
            <dd th:each="commentaire: ${commentaires}" th:text="${commentaire.getCommentaire()}">Commentaire</dd>
        </dl>
    </div>
    <br>
</div>
<div class="container">
    <form id="formAjoutCommentaire" method="post" th:action="@{site(id=${site.getId()})}">
        <div class="row align-items-center">
            <div class="col-3"><strong>Ajouter un commentaire:</strong></div>
            <div class="col-7"><textarea class="col-12" name="commentaireSite"
                                         th:value="${commentaire.getCommentaire()}"></textarea></div>
            <div class="clearfix visible"/>
            <div class="col-2">
                <button name="ajouter" type="submit" value="Ajouter!">Ajouter</button>
            </div>
        </div>
    </form>
</div>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script crossorigin="anonymous"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
</div>
</body>
</html>